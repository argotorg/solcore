contract Option {
  data Option(a) = None | Some(a);

  forall a . function just(x : a) -> Option(a){ return Some(x); }

  forall a . function maybe(n : a, o : Option(a)) -> a {
    match o {
      | None => return n;
      | Some(x) => return x;
    }
  }

  forall a . function join(mmx : Option(Option(a))) -> Option(a) {
    let result = None;
    match mmx {
      | Some(Some(x)) => result = Some(x);
      | None => result = None;
    }
    return result;
  }

 forall a . function extract(mx : Option(a)) -> a {
   match mx {
     | Some(x) => return x;
   }
 }

 forall a . function cojoin(x : a) -> Option(a) { // Test that sum types can grow
    let result = None;
    result = Some(x);
    return result;
   }


  function main() -> word {
    return maybe(0, join(cojoin(Some(42))));
  }
}
